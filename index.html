<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>F1 Reaction Test</title>
<style>
    body {
        margin: 0;
        background: #000;
        font-family: Arial, sans-serif;
        color: white;
        overflow-x: hidden;
        user-select: none;
        text-align: center;
    }

    /* HOME PAGE */
    #home {
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 20px;
    }

    #playBtn {
        background: #00ff68;
        padding: 15px 35px;
        border-radius: 12px;
        font-size: 26px;
        font-weight: 800;
        color: #003300;
        border: none;
        cursor: pointer;
        transition: 0.2s;
        box-shadow: 0 0 20px #00ff68;
    }

    #playBtn:hover {
        transform: scale(1.1);
    }

    /* GAME PAGE */
    #game {
        display: none;
        height: 100vh;
        width: 100%;
        /* NOTE: Requires 'cockpit.jpg' image in the same folder */
        background: url('cockpit.jpg') center/cover no-repeat;
        position: relative;
    }

    #overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.65);
        backdrop-filter: blur(3px);
    }

    #ui {
        position: absolute;
        top: 10%;
        width: 100%;
        text-align: center;
    }

    h1 {
        font-size: 2.2rem;
        text-shadow: 0 0 10px black;
    }

    .lights {
        display: flex;
        justify-content: center;
        gap: 12px;
        margin: 20px 0;
    }

    .light {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        background: #220000;
        border: 2px solid #550000;
        transition: 0.15s;
    }

    .light.on {
        background: red;
        box-shadow: 0 0 20px red;
    }

    /* Green 'go' signal */
    .light.go {
        background: #00ff68;
        box-shadow: 0 0 20px #00ff68;
        border: 2px solid #003300;
    }

    #timer {
        margin-top: 10px;
        font-size: 2.8rem;
        font-weight: bold;
        text-shadow: 0 0 12px black;
    }

    #startBtn {
        margin-top: 25px;
        padding: 12px 25px;
        font-size: 22px;
        background: #00ff68;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-weight: bold;
        color: #003300;
        box-shadow: 0 0 20px #00ff68;
    }
</style>
</head>
<body>

<!-- HOME PAGE -->
<div id="home">
    <h1 style="font-size:40px;">Elazion F1 Reflex Challenge ðŸš€</h1>
    <button id="playBtn">PLAY</button>
</div>

<!-- GAME PAGE -->
<div id="game">
    <div id="overlay"></div>

    <div id="ui">
        <h1>F1 REACTION TEST</h1>

        <div class="lights">
            <div class="light red"></div>
            <div class="light red"></div>
            <div class="light red"></div>
            <div class="light red"></div>
            <div class="light red"></div>
        </div>

        <h2 id="timer">00.000</h2>
        <button id="startBtn">READY</button>
    </div>
</div>

<script>
const playBtn = document.getElementById("playBtn");
const home = document.getElementById("home");
const game = document.getElementById("game");

playBtn.onclick = () => {
    home.style.display = "none";
    game.style.display = "block";
};

const lights = document.querySelectorAll(".light");
const timerDisplay = document.getElementById("timer");
const startBtn = document.getElementById("startBtn");

let startTime = 0;
let timerInterval = null;
let waitingForGreen = false;

// Start/Stop button functionality
startBtn.onclick = () => {
    if (waitingForGreen) {
        // STOP button clicked
        stopTimer();
    } else {
        // READY button clicked
        startSequence();
    }
};

function startSequence() {
    resetLights();
    timerDisplay.textContent = "00.000";
    startBtn.disabled = true;
    startBtn.textContent = "STOP";

    let delay = 1000; // Time before first light
    const lightInterval = 800; // Time between each red light

    lights.forEach((light, index) => {
        setTimeout(() => {
            light.classList.add("on");

            if (index === lights.length - 1) {
                // Random delay before green light
                const randomDelay = Math.random() * 2000 + 1000;
                setTimeout(() => goGreen(), randomDelay);
            }
        }, delay + index * lightInterval);
    });
}

function goGreen() {
    lights.forEach(light => {
        light.classList.remove("on");
        light.classList.add("go");
    });

    waitingForGreen = true;
    startTime = performance.now();

    // Start updating timer every millisecond
    timerInterval = setInterval(() => {
        let elapsed = (performance.now() - startTime) / 1000;
        timerDisplay.textContent = elapsed.toFixed(3);
    }, 1);

    startBtn.disabled = false;
}

function stopTimer() {
    if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
    }
    waitingForGreen = false;
    startBtn.textContent = "READY";
}

function resetLights() {
    lights.forEach(light => {
        light.classList.remove("on");
        light.classList.remove("go");
    });
}
</script>


</body>
</html>
